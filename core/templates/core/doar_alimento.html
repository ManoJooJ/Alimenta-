{% extends 'core/base.html' %}

{% block title %}Fazer DoaÃ§Ã£o - Alimenta+{% endblock %}

{% block content %}
<div class="card" style="max-width: 700px; margin: 2rem auto;">
  <h2 style="text-align: center; color: #10b981; margin-bottom: 2rem;">
    ğŸ Fazer DoaÃ§Ã£o
  </h2>

  <!-- InformaÃ§Ãµes da ONG -->
  <div style="background: #f5f7fa; padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem;">
    <h3 style="color: #333; margin-bottom: 1rem;">{{ necessidade.ong.nome }}</h3>
    <p style="color: #666; margin-bottom: 0.5rem;">{{ necessidade.ong.descricao }}</p>
    <p style="color: #666;"><strong>ResponsÃ¡vel:</strong> {{ necessidade.ong.responsavel }}</p>
    <p style="color: #666;"><strong>Contato:</strong> {{ necessidade.ong.telefone_contato }}</p>
  </div>

  <!-- InformaÃ§Ãµes do Alimento -->
  <div style="background: #e8f4f8; padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem;">
    <h3 style="color: #333; margin-bottom: 1rem;">ğŸ“¦ {{ necessidade.alimento.nome }}</h3>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
      <div>
        <p style="color: #666; font-size: 0.9rem;">Quantidade NecessÃ¡ria:</p>
        <p style="font-size: 1.3rem; font-weight: bold; color: #10b981;">
          {{ necessidade.quantidade_necessaria }} {{ necessidade.alimento.get_unidade_medida_display }}
        </p>
      </div>
      <div>
        <p style="color: #666; font-size: 0.9rem;">JÃ¡ Recebido:</p>
        <p style="font-size: 1.3rem; font-weight: bold; color: #10b981;">
          {{ necessidade.quantidade_recebida }} {{ necessidade.alimento.get_unidade_medida_display }}
        </p>
      </div>
    </div>

    <div>
      <p style="color: #666; font-size: 0.9rem; margin-bottom: 0.5rem;">Ainda Falta:</p>
      <p style="font-size: 1.5rem; font-weight: bold; color: #e74c3c;">
        {{ necessidade.quantidade_faltante }} {{ necessidade.alimento.get_unidade_medida_display }}
      </p>
    </div>

    <div style="background: #f0f0f0; height: 15px; border-radius: 8px; overflow: hidden; margin-top: 1rem;">
      <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); 
                        height: 100%; width: {{ necessidade.percentual_recebido }}%;"></div>
    </div>
    <p style="text-align: center; margin-top: 0.5rem; font-weight: bold; color: #666;">
      {{ necessidade.percentual_recebido|floatformat:1 }}% atingido
    </p>

    {% if necessidade.observacoes %}
    <div style="margin-top: 1rem; padding: 1rem; background: white; border-radius: 8px;">
      <p style="font-size: 0.9rem; color: #666; font-style: italic;">
        <strong>ObservaÃ§Ã£o:</strong> "{{ necessidade.observacoes }}"
      </p>
    </div>
    {% endif %}
  </div>

  <!-- FormulÃ¡rio de DoaÃ§Ã£o -->
  <form method="post">
    {% csrf_token %}

    <div class="form-group">
      <label for="quantidade">
        Quantidade a Doar ({{ necessidade.alimento.get_unidade_medida_display }})
      </label>
      <input type="number" id="quantidade" name="quantidade" step="0.01" min="0.01" required placeholder="Ex: 10">
      <small style="color: #666; display: block; margin-top: 0.3rem;">
        VocÃª pode doar qualquer quantidade que desejar
      </small>
    </div>

    <div class="form-group">
      <label for="mensagem">Mensagem (Opcional)</label>
      <textarea id="mensagem" name="mensagem" rows="4"
        placeholder="Deixe uma mensagem de apoio para a ONG..."></textarea>
    </div>

    <div style="display: flex; gap: 1rem;">
      <a href="{% url 'core:dashboard_cliente' %}" class="btn-secondary"
        style="flex: 1; text-align: center; text-decoration: none;">
        Cancelar
      </a>
      <button type="submit" class="btn-primary" style="flex: 2;">
        Confirmar DoaÃ§Ã£o
      </button>
    </div>
  </form>
</div>
{% endblock %}